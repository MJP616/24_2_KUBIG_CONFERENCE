<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Responsive Form</title>
  <link rel="stylesheet" href="/wedding/static/style.css">
  <link rel='stylesheet' href='https://unicons.iconscout.com/release/v3.0.0/css/line.css'>
<link rel='stylesheet' href='https://unicons.iconscout.com/release/v3.0.0/css/solid.css'>
<link rel='stylesheet' href='https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;display=swap'><link rel="stylesheet" href="./style.css">

</head>
<body>
<!-- partial:index.partial.html -->
<main class="flexbox-col">
  <div class="form-wrapper">
    <form id="form" method="post" name="preferencesForm" action="submit_preferences.php">
      <h3 class="form-title">Photo Preferences Form</h3>
      <p class="form-undertitle">All fields are optional.</p>

      <!-- 색감 -->
      <div class="form-input-max">
        <p class="form-text">Feeling of color (Select multiple)</p>
        <div class="form-checkbox-wrapper">
          <label><input type="checkbox" name="color[]" value="감성"> 감성</label>
          <label><input type="checkbox" name="color[]" value="부드러움"> 부드러움</label>
          <label><input type="checkbox" name="color[]" value="따뜻함"> 따뜻함</label>
          <label><input type="checkbox" name="color[]" value="밝음"> 밝음</label>
          <label><input type="checkbox" name="color[]" value="화사함"> 화사함</label>
          <label><input type="checkbox" name="color[]" value="청량함"> 청량함</label>
          <label><input type="checkbox" name="color[]" value="선명함"> 선명함</label>
          <label><input type="checkbox" name="color[]" value="풍부함"> 풍부함</label>
          <label><input type="checkbox" name="color[]" value="자연"> 자연</label>
          <label><input type="checkbox" name="color[]" value="대비"> 대비</label>
          <label><input type="checkbox" name="color[]" value="흑백"> 흑백</label>
          <label><input type="checkbox" name="color[]" value="빈티지"> 빈티지</label>
          <label><input type="checkbox" name="color[]" value="어두움"> 어두움</label>
        </div>
      </div>

      <!-- 분위기 -->
      <div class="form-input-max">
        <p class="form-text">Mood (Select multiple)</p>
        <div class="form-checkbox-wrapper">
          <label><input type="checkbox" name="mood[]" value="감성적"> 감성적</label>
          <label><input type="checkbox" name="mood[]" value="로맨틱"> 로맨틱</label>
          <label><input type="checkbox" name="mood[]" value="사랑스러움"> 사랑스러움</label>
          <label><input type="checkbox" name="mood[]" value="몽환적"> 몽환적</label>
          <label><input type="checkbox" name="mood[]" value="우아함"> 우아함</label>
          <label><input type="checkbox" name="mood[]" value="차분함"> 차분함</label>
          <label><input type="checkbox" name="mood[]" value="평화로움"> 평화로움</label>
          <label><input type="checkbox" name="mood[]" value="편안함"> 편안함</label>
          <label><input type="checkbox" name="mood[]" value="자연스러움"> 자연스러움</label>
          <label><input type="checkbox" name="mood[]" value="자유로움"> 자유로움</label>
          <label><input type="checkbox" name="mood[]" value="빈티지"> 빈티지</label>
          <label><input type="checkbox" name="mood[]" value="경쾌함"> 경쾌함</label>
        </div>
      </div>
      
      <!-- 고유한 특징 -->
      <div class="form-input-max">
        <p class="form-text">Unique Features (Select multiple)</p>
        <div class="form-checkbox-wrapper">
          <label><input type="checkbox" name="features[]" value="감성적 연출"> 감성적 연출</label>
          <label><input type="checkbox" name="features[]" value="부드러운 분위기"> 부드러운 분위기</label>
          <label><input type="checkbox" name="features[]" value="유니크한 연출"> 유니크한 연출</label>
          <label><input type="checkbox" name="features[]" value="소품 활용"> 소품 활용</label>
          <label><input type="checkbox" name="features[]" value="자연 배경"> 자연 배경</label>
          <label><input type="checkbox" name="features[]" value="야외 배경"> 야외 배경</label>
          <label><input type="checkbox" name="features[]" value="특정 장소"> 특정 장소</label>
          <label><input type="checkbox" name="features[]" value="도시 배경"> 도시 배경</label>
          <label><input type="checkbox" name="features[]" value="인물 중심"> 인물 중심</label>
          <label><input type="checkbox" name="features[]" value="일상적 연출"> 일상적 연출</label>
          <label><input type="checkbox" name="features[]" value="캐주얼 연출"> 캐주얼 연출</label>
          <label><input type="checkbox" name="features[]" value="클래식 연출"> 클래식 연출</label>
        </div>
      </div>

      <!-- 촬영 구도 -->
      <div class="form-input-max">
        <p class="form-text">Composition (Select multiple)</p>
        <div class="form-checkbox-wrapper">
          <label><input type="checkbox" name="composition[]" value="근접"> 근접</label>
          <label><input type="checkbox" name="composition[]" value="정면"> 정면</label>
          <label><input type="checkbox" name="composition[]" value="측면"> 측면</label>
          <label><input type="checkbox" name="composition[]" value="다각도"> 다각도</label>
          <label><input type="checkbox" name="composition[]" value="탑뷰"> 탑뷰</label>
        </div>
      </div>
      
      <!-- 동작 -->
      <div class="form-input-max">
        <p class="form-text">Pose (Select multiple)</p>
        <div class="form-checkbox-wrapper">
          <label><input type="checkbox" name="pose[]" value="정적 포즈"> 정적 포즈</label>
          <label><input type="checkbox" name="pose[]" value="미소/웃음"> 미소/웃음</label>
          <label><input type="checkbox" name="pose[]" value="손잡기/애정표현"> 손잡기/애정표현</label>
          <label><input type="checkbox" name="pose[]" value="포옹/키스"> 포옹/키스</label>
          <label><input type="checkbox" name="pose[]" value="걷기/움직임"> 걷기/움직임</label>
          <label><input type="checkbox" name="pose[]" value="춤/활동적 동작"> 춤/활동적 동작</label>
          <label><input type="checkbox" name="pose[]" value="소품 활용/기타"> 소품 활용/기타</label>
        </div>
      </div>
      
      <!-- 의상 -->
      <div class="form-input-max">
        <p class="form-text">Garment (Select multiple)</p>
        <div class="form-checkbox-wrapper">
          <label><input type="checkbox" name="garment[]" value="웨딩 드레스"> 웨딩 드레스</label>
          <label><input type="checkbox" name="garment[]" value="베일"> 베일</label>
          <label><input type="checkbox" name="garment[]" value="턱시도"> 턱시도</label>
          <label><input type="checkbox" name="garment[]" value="캐주얼"> 캐주얼</label>
          <label><input type="checkbox" name="garment[]" value="군복"> 군복</label>
        </div>
      </div>
      
      <!-- 메시지 -->
      <div class="form-input-max">
        <p class="form-text">Message (Max 500)</p>
        <div id="textarea" class="form-input-wrapper flexbox-left-start">
          <i class="uil uil-comment-dots"></i>
          <textarea class="form-input" id="message" name="message" placeholder="위 보기 내용들을 참고하여 작성해주세요. (e.g. 자연을 배경으로 두 사람이 서로를 마주보고 있었으면 좋겠어.)" maxlength="500"></textarea>
        </div>
      </div>

      <!-- Submit -->
      <div class="form-input-max flexbox-left">
        <div class="button-wrapper">
          <button id="form-button" type="submit" class="button btn-primary">
            <i class="uil uil-envelope-heart"></i> Recommend
            <div class="btn-secondary"></div>
          </button>
        </div>
      </div>
    </form>
  </div>
  
  <div id="results" class="form-results">
    <h3 style="text-align: center; font-size: 24px; margin-bottom: 20px;">Recommendations</h3>
    <ul id="recommendation-list"></ul>
  </div>
  
</main>
<!-- partial -->
<script type="module" src="/wedding/static/script.js"></script>
  <script src='https://code.jquery.com/jquery-3.5.1.js'></script>
<script src='https://code.jquery.com/ui/1.12.1/jquery-ui.js'></script>
<script src='https://unicons.iconscout.com/release/v3.0.0/script/monochrome/bundle.js'></script>

<script>
  document.getElementById("form").addEventListener("submit", function (event) {
    event.preventDefault();
    
    const formData = new FormData(this);
    const options = {};

    // Form 데이터 추출
    formData.forEach((value, key) => {
      if (!options[key]) options[key] = [];
      options[key].push(value);
    });

    // JSON 데이터 생성
    const userInput = {
      options: options,
      top_k: 3,
      text: document.getElementById("message").value || null
    };

    // Fetch를 사용해 API 호출
    fetch("/wedding", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(userInput)
    })
      .then(response => response.json())
      .then(data => {
        console.log("Recommendations:", data);
      })
      .catch(error => console.error("Error:", error));
  });
</script>

</body>
</html>
